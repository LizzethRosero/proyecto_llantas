{% extends "base.html" %}
{% block title %} Carrito {% endblock %}
{% block content %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito de Compras</title>
    <!-- Agrega la referencia a Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container mt-5">
    <h2>Productos</h2>
    <div class="row">
        <div class="col-md-4">
            <div class="card">
                <img src="{{ url_for('static', filename='img/llanta1.jpg') }}" alt="Llanta 1">
                <div class="card-body">
                    <h5 class="card-title">Producto 1</h5>
                    <p class="card-text">$100.000</p>
                    <button class="btn btn-primary add-to-cart" data-price="100.000" data-product="Producto 1">Agregar al Carrito</button>
                </div>
            </div>
        </div>
        <!-- Puedes agregar más productos aquí -->
    </div>

    <h2 class="mt-5">Carrito de Compras</h2>
    <ul id="cart" class="list-group">
        <!-- Aquí se mostrarán los elementos del carrito -->
    </ul>
    <p class="mt-3">Total: $<span id="total">0</span></p>
</div>

<script>
    $(document).ready(function () {
        var cart = [];

        $(".add-to-cart").click(function () {
            var price = parseFloat($(this).data("price"));
            var product = $(this).data("product");

            cart.push({ product: product, price: price });
            updateCart();
        });

        $(document).on("click", ".remove-from-cart", function () {
            var index = $(this).data("index");
            cart.splice(index, 1);
            updateCart();
        });

        function updateCart() {
            var cartList = $("#cart");
            var totalElement = $("#total");
            var total = 0;

            cartList.empty();

            if (cart.length === 0) {
                cartList.append("<li class='list-group-item'>El carrito está vacío</li>");
            } else {
                for (var i = 0; i < cart.length; i++) {
                    var item = cart[i];
                    cartList.append("<li class='list-group-item'>" + item.product +
                        " - $" + item.price.toFixed(3) +
                        " <button class='btn btn-danger btn-sm remove-from-cart' data-index='" + i + "'>Eliminar</button></li>");
                    total += item.price;
                }
            }

            totalElement.text(total.toFixed(3));
        }
    });
</script>

</body>
</html>



{% endblock %}